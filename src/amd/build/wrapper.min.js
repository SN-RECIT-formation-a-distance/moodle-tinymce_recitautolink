define("tiny_recitautolink/wrapper",["exports","core/str","./options","core/modal","core/modal_events"],(function(_exports,_str,_options,_modal,_modal_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.Editor=void 0,_modal=_interopRequireDefault(_modal),_modal_events=_interopRequireDefault(_modal_events);_exports.Editor=class{constructor(){_defineProperty(this,"appReact",null),_defineProperty(this,"modal",null)}async open(editor){this.editor=editor;let js=M.cfg.wwwroot+"/lib/editor/tiny/plugins/recitautolink/react/build/index.js",that=this;if(this.modal=await _modal.default.create({title:(0,_str.get_string)("pluginname","tiny_recitautolink"),body:'<div id="recitautolink_container"></div>'}),this.modal.setRemoveOnClose(!0),this.modal.getModal().addClass("modal-xl"),this.modal.getRoot().on(_modal_events.default.hidden,(()=>{that.unmountUI(),that.modal.destroy()})),this.modal.show(),document.getElementById("recitautolink"))this.loadUI();else{var script=document.createElement("script");script.onload=this.loadUI.bind(this),script.setAttribute("src",js),script.setAttribute("id","recitautolink"),script.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(script)}}getTemplateContext(editor){return{elementid:editor.id}}get(){return(0,_options.getCourseId)(this.editor)}unmountUI(){this.appReact&&this.appReact.unmount()}loadUI(){if(window.openRecitAutolinkUI){let classHandler={get:v=>this.get(v),close:v=>this.closeUI(v)};this.appReact=window.openRecitAutolinkUI(classHandler)}}closeUI(code){this.modal.destroy(),this.unmountUI(),code&&this.editor.execCommand("mceInsertContent",!1,code)}}}));

//# sourceMappingURL=wrapper.min.js.map